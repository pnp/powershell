<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Using PnP PowerShell in Docker containers | PnP PowerShell </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Using PnP PowerShell in Docker containers | PnP PowerShell ">
    <meta name="generator" content="docfx ">
  <meta name="description" content="PnP PowerShell is an open source, community driven, PowerShell Module designed to work with Microsoft 365.">
    <link rel="shortcut icon" href="https://c.s-microsoft.com/favicon.ico?v2">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
  
  <meta property="docfx:rel" content="../">
  <meta property="docfx:newtab" content="true">
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <label class="glyphicon glyphicon-search" for="search-query"></label>
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
                
                  <div class="contribution-panel mobile-hide pull-right">
                      <a href="https://github.com/pnp/powershell/blob/dev/pages/articles/docker.md/#L1" title="Edit this page" class="improve-doc-lg"><i class="glyphicon glyphicon-pencil"></i></a>
                  </div>
  <h1 id="using-pnp-powershell-in-docker-containers">Using PnP PowerShell in Docker containers</h1>

<p>Using Docker allows you to use any software inside virtual environments, without having to install this software directly on your laptop or server. These virtual environments are containers, which might be imagined as lightweight virtual machines. Having their own virtual disks, memory and processes, containers are rationally isolated from your laptop operating system, providing you a great way of experimenting and using any version of PnP.PowerShell without installing it.</p>
<p><img src="../images/docker/dockercontainers.png" alt="Using software in virtual environments, called containers"></p>
<p>The good news is that you will not even need to install PnP.PowerShell in containers by your own: PnP team is already publishing Docker container images for each supported and nightly release, <a href="https://hub.docker.com/r/m365pnp/powershell">here</a>. You will however need to install docker runtime.</p>
<p>If you use Windows, we would recommend you using Linux containers with help of WSL. Alternatively, even though it is not the most common way, you might want to run PnP.PowerShell in Windows containers. Mind you that some use cases might be limited when using Windows containers. If you use Mac OS or Linux, the easiest way is to use Linux containers.</p>
<h2 id="play-with-pnppowershell-online">Play with PnP.PowerShell online</h2>
<p>You can try using m365pnp/powershell Docker containers online, without installing anything on your desktop/laptop.</p>
<ol>
<li><p>Open <a href="https://labs.play-with-docker.com/">https://labs.play-with-docker.com/</a></p>
</li>
<li><p>Login</p>
</li>
<li><p>Click <code>Start</code></p>
</li>
<li><p>Click <code>+ ADD NEW INSTANCE</code></p>
</li>
<li><p>Run in the online console:</p>
<pre><code class="lang-powershell">docker run --rm -it m365pnp/powershell
</code></pre>
</li>
</ol>
<p>After that you can start running commands like <code>Connect-PnPOnline</code>.</p>
<h2 id="installing-docker-locally">Installing Docker locally</h2>
<ul>
<li><p>Mac OS:</p>
<ol>
<li>Install</li>
</ol>
<pre><code class="lang-bash">brew install --cask docker
</code></pre>
<ol start="2">
<li><p>Launch Docker:</p>
<ul>
<li>Press ⌘ + Space to bring up Spotlight Search and enter Docker to launch Docker.</li>
<li>In the Docker needs privileged access dialog box, click OK.</li>
<li>Enter password and click OK.</li>
</ul>
</li>
</ol>
</li>
<li><p>Linux:</p>
<pre><code class="lang-bash">bash &lt;(curl -s https://get.docker.com/)
sudo usermod -aG docker $USER
newgrp docker
</code></pre>
</li>
<li><p>Linux containers on Windows (using WSL):</p>
<ol>
<li><p>Start installing WSL:</p>
<pre><code class="lang-powershell">Enable-WindowsOptionalFeature -Online -FeatureName &quot;Microsoft-Windows-Subsystem-Linux&quot;, &quot;VirtualMachinePlatform&quot; -NoRestart
Invoke-WebRequest -Uri https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi -OutFile wsl_update_x64.msi -UseBasicParsing
Start-Process msiexec.exe -Wait -ArgumentList &quot;/I $((Get-Location).Path)\wsl_update_x64.msi /quiet&quot;
</code></pre>
</li>
<li><p>Reboot the machine before you continue</p>
</li>
<li><p>Finish installing WSL:</p>
<pre><code class="lang-powershell">wsl --set-default-version 2
wsl --install --distribution Ubuntu
</code></pre>
</li>
<li><p>Install docker in WSL:</p>
<pre><code class="lang-bash">bash &lt;(curl -s https://get.docker.com/)
sudo usermod -aG docker $USER
newgrp docker
</code></pre>
</li>
</ol>
</li>
<li><p>Windows:</p>
<pre><code class="lang-powershell">iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))
choco install -y docker-engine
</code></pre>
</li>
</ul>
<h2 id="using-pnppowershell">Using PnP.PowerShell</h2>
<p>Sometimes you want to run inline PnP.PowerShell commands.</p>
<ul>
<li><p>Latest stable version:</p>
<pre><code class="lang-bash">docker run --rm -it m365pnp/powershell:latest
</code></pre>
</li>
<li><p>Latest nightly version:</p>
<pre><code class="lang-powershell">docker run --rm -it m365pnp/powershell:nightly
</code></pre>
</li>
</ul>
<p>After that you can start running commands like <code>Connect-PnPOnline</code>.</p>
<p>Mind you that in the case above, the container will have an isolated disk system so the commands that you run inside the container will not be able to access files from your host machine. However, sometimes you might want to run a script or use some files from your host OS (for example, when you have a ps1 file in a git repository that you cloned to your laptop). In this case you will need to mount a directory on your host as a volume inside the container. See the following examples.</p>
<ul>
<li><p>Linux/WSL/Mac OS:</p>
<pre><code class="lang-bash">docker run --rm -it -v &quot;$(pwd):/home&quot; -w /home m365pnp/powershell
</code></pre>
</li>
<li><p>Windows (run in PowerShell console):</p>
<pre><code class="lang-powershell">docker run --rm -it -v &quot;${pwd}:C:\workplace&quot; -w C:\workplace m365pnp/powershell
</code></pre>
</li>
</ul>
<p>In such container you can run <code>Get-ChildItem</code> and see the contents of the current directory.</p>
<p>The examples above start new container and allow you to interactively use container, running inline commands. In other cases however, you might want to just start a container for a short time (a few seconds maybe) and run a ps1 script unattended and then automatically terminate the container. Here is how you can do it.</p>
<ul>
<li><p>Linux/WSL/Mac OS:</p>
<pre><code class="lang-bash">docker run --rm -v &quot;$(pwd):/home&quot; -w /home m365pnp/powershell pwsh test.ps1
</code></pre>
</li>
<li><p>Windows (run in PowerShell console):</p>
<pre><code class="lang-powershell">docker run --rm -v &quot;${pwd}:C:\workplace&quot; -w C:\workplace m365pnp/powershell:1.10.0-nanoserver-1809 pwsh test.ps1
</code></pre>
</li>
</ul>
<p>Finally, your scripts might have parametrization so that you can run the same code in different cases/environments. This is the way to provide variable values.</p>
<ul>
<li><p>Linux/WSL/Mac OS:</p>
<pre><code class="lang-bash">ParameterValue=&quot;test&quot;
docker run --rm -v &quot;$(pwd):/home&quot; -w /home m365pnp/powershell pwsh -c &quot;./test.ps1 -Parameter1 $ParameterValue&quot;
</code></pre>
</li>
<li><p>Windows (run in PowerShell console):</p>
<pre><code class="lang-powershell">$ParameterValue=&quot;test&quot;
docker run --rm -v &quot;${pwd}:C:\workplace&quot; -w C:\workplace m365pnp/powershell:1.10.0-nanoserver-1809 pwsh -c &quot;./test.ps1 -Parameter1 $ParameterValue&quot;
</code></pre>
</li>
</ul>
<p>Please see <a href="https://docs.docker.com/engine/reference/run/">Docker documentation</a> to see arguments for <code>docker run</code> command.</p>
<h2 id="featured-tags">Featured tags</h2>
<h3 id="latest">Latest</h3>
<ul>
<li><p>latest: The latest stable image</p>
<ul>
<li>alpine-3.17</li>
<li><code>docker pull m365pnp/powershell</code> or <code>docker pull m365pnp/powershell:latest</code></li>
</ul>
</li>
</ul>
<h3 id="nightly">Nightly</h3>
<ul>
<li><p>nightly: The latest nightly image</p>
<ul>
<li>alpine-3.20</li>
<li><code>docker pull m365pnp/powershell:nightly</code></li>
</ul>
</li>
</ul>
<h2 id="tag-explanation">Tag explanation</h2>
<p>Tags names mean the following:</p>
<p><code>&lt;version&gt;(-nightly)-&lt;platform&gt;</code></p>
<p>Currently supported platforms:</p>
<ul>
<li>nanoserver-ltsc2022 (Windows 2022)</li>
<li>nanoserver-1809 (Windows 2019)</li>
<li>alpine-3.20 (Linux 64 bits)</li>
<li>ubuntu-focal-arm32 (ARM 32 bits, i.e. Raspberry Pi &lt; 4)</li>
<li>azurelinux-3.0-arm64 (ARM 64 bits, i.e. Raspberry Pi &gt;= 4)</li>
</ul>
<p>Tag name examples:</p>
<ul>
<li>2.99.114-nightly-azurelinux-3.0-arm64</li>
<li>2.99.112-nightly-alpine-3.20</li>
<li>2.12.0-lts-alpine-3.17</li>
<li>2.12.0-nanoserver-ltsc2022</li>
<li>1.8.0-nanoserver-ltsc2022</li>
<li>1.9.0-nanoserver-ltsc2022</li>
<li>1.10.0-nanoserver-1809</li>
<li>1.10.0-alpine-3.16.5</li>
<li>1.10.26-nightly-nanoserver-ltsc2022</li>
</ul>
<p>To find the version numbers please visit <a href="https://www.powershellgallery.com/packages/PnP.PowerShell">https://www.powershellgallery.com/packages/PnP.PowerShell</a> or <a href="https://hub.docker.com/r/m365pnp/powershell/tags">https://hub.docker.com/r/m365pnp/powershell/tags</a></p>

</article>
          </div>
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              </nav>
            </div>
          </div>        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
            <img src="https://m365-visitor-stats.azurewebsites.net/@pnp.github.io/index/" alt="spacer">
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "ag6usxufyq");
    </script>  </body>
</html>